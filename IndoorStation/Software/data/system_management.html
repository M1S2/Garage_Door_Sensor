<!DOCTYPE HTML>
<html>
	<head>
		<title>Garagen Tor Status System Verwaltung</title>
		<meta content="text/html; charset=UTF-8" http-equiv="content-type">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- https://fonts.google.com/icons -->
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
		<link rel="stylesheet" type="text/css" href="style.css">
	</head>
	<body onload="bodyLoaded()">
		<div id="Heading">
			<div>Garagen Tor Status</div>
			<div id="SubHeading">System Verwaltung</div>
		</div>
		
		<nav role="navigation">
			<a href="/index.html"><i class="material-symbols-outlined">info</i> Übersicht</a>
			<a href="/system_management.html" class="active"><i class="material-symbols-outlined">settings</i> System Verwaltung</a>
			<a href="/sensor_history.html"><i class="material-symbols-outlined">monitoring</i> Sensor Diagramme</a>
		</nav>

		<div class="content">
			<div class="cards">
				<!----------------------- SENSOR 1 --------------------------------------------------------------------------------------->
				<div class="card sensor1">
					<h2><i class="material-symbols-outlined" style="vertical-align: middle">settings</i> #1 - KONFIGURATION</h2>
					<h4><i class="material-symbols-outlined" style="vertical-align: middle">pin</i> MAC</h4>

					<form action="/set_mac_sensor" onsubmit="submitMacMessage()" target="hidden-form">
						<input type="hidden" name="sensorIndex" value="0">
						<input 	class="input_sensor1" required
								id="mac_sensor_1"
								name="mac"
								type="text"
								value="%MAC_SENSOR_1%"
								placeholder="00:00:00:00:00:00"
								pattern="[0-9A-Fa-f]{2}:[0-9A-Fa-f]{2}:[0-9A-Fa-f]{2}:[0-9A-Fa-f]{2}:[0-9A-Fa-f]{2}:[0-9A-Fa-f]{2}">
						<input class="submit_button" type="submit" value="Übernehmen">
					</form>
					<iframe style="display:none" name="hidden-form"></iframe>
					<br>
					<h4><i class="material-symbols-outlined" style="vertical-align: middle">chat_bubble</i> ANZAHL NACHRICHTEN</h4>
					<p id="num_msg_1">%NUM_MESSAGES_1%</p>
					<br>					
					<h4><i class="material-symbols-outlined" style="vertical-align: middle">update</i> SOFTWARE VERSION</h4>
					<p>%SENSOR_SW_VERSION_1%</p>
					<br>
					<h4><i class="material-symbols-outlined" style="vertical-align: middle">database</i> DATEN VERWALTEN</h4>
					<form action="/remove_data" method="get">
						<input type="hidden" name="sensorIndex" value="0">
						<input class="submit_button" type="submit" value="Daten löschen"/>
					</form>
					<form action="/download_data" method="get">
						<input type="hidden" name="sensorIndex" value="0">
						<input id="submit_download_1" class="submit_button" type="submit" value="Daten herunterladen" title="Sensor Daten vom ESP8266 herunterladen"/>
					</form>
				</div>
				<!----------------------- SENSOR 2 --------------------------------------------------------------------------------------->
				<div class="card sensor2">
					<h2><i class="material-symbols-outlined" style="vertical-align: middle">settings</i> #2 - KONFIGURATION</h2>
					<h4><i class="material-symbols-outlined" style="vertical-align: middle">pin</i> MAC</h4>
					
					<form action="/set_mac_sensor" onsubmit="submitMacMessage()" target="hidden-form">
						<input type="hidden" name="sensorIndex" value="1">
						<input 	class="input_sensor2" required
								id="mac_sensor_2"
								name="mac"
								type="text"
								value="%MAC_SENSOR_2%"
								placeholder="00:00:00:00:00:00"
								pattern="[0-9A-Fa-f]{2}:[0-9A-Fa-f]{2}:[0-9A-Fa-f]{2}:[0-9A-Fa-f]{2}:[0-9A-Fa-f]{2}:[0-9A-Fa-f]{2}">
						<input class="submit_button" type="submit" value="Übernehmen">
					</form>
					<iframe style="display:none" name="hidden-form"></iframe>
					<br>
					<h4><i class="material-symbols-outlined" style="vertical-align: middle">chat_bubble</i> ANZAHL NACHRICHTEN</h4>
					<p id="num_msg_2">%NUM_MESSAGES_2%</p>
					<br>
					<h4><i class="material-symbols-outlined" style="vertical-align: middle">update</i> SOFTWARE VERSION</h4>
					<p>%SENSOR_SW_VERSION_2%</p>
					<br>
					<h4><i class="material-symbols-outlined" style="vertical-align: middle">database</i> DATEN VERWALTEN</h4>
					<form action="/remove_data" method="get">
						<input type="hidden" name="sensorIndex" value="1">
						<input class="submit_button" type="submit" value="Daten löschen"/>
					</form>
					<form action="/download_data" method="get">
						<input type="hidden" name="sensorIndex" value="1">
						<input id="submit_download_2" class="submit_button" type="submit" value="Daten herunterladen" title="Sensor Daten vom ESP8266 herunterladen"/>
					</form>
				</div>
				<!----------------------- UPLOAD --------------------------------------------------------------------------------------->
				<div class="card general">
					<h2><i class="material-symbols-outlined" style="vertical-align: middle">upload</i> HOCHLADEN</h2>
					<p>Für das hochladen folgende Dateinamen verwenden:</p>
					<p>dataSensor0.bin: Daten für Sensor 1<br>
					dataSensor1.bin: Daten für Sensor 2<br>
					...<br>
					Alle anderen Dateien werden ignoriert.</p>
					<br>

					<!-- https://github.com/smford/esp32-asyncwebserver-fileupload-example/blob/master/example-01/example-01.ino -->
					<form action="/upload_data" method="POST" enctype="multipart/form-data">
						<input type="file" name="data" accept=".bin"/>
						<br>
						<input class="submit_button" type="submit" value="Daten hochladen" title="Sensor Daten auf den ESP8266 hochladen">
					</form>
				</div>
				<!----------------------- SYSTEM INFO --------------------------------------------------------------------------------------->
				<div class="card general">
					<h2><i class="material-symbols-outlined" style="vertical-align: middle">info</i> SYSTEM INFO</h2>
					<h4><i class="material-symbols-outlined" style="vertical-align: middle">pin</i> EIGENE MAC</h4>
					<p>%INDOOR_STATION_MAC%</p>
					<br>
					<h4><i class="material-symbols-outlined" style="vertical-align: middle">update</i> SOFTWARE VERSION</h4>
					<p>%INDOOR_STATION_SW_VERSION%</p>
					<br>
					<h4><i class="material-symbols-outlined" style="vertical-align: middle">storage</i> SPEICHERBELEGUNG</h4>
					<p>%MEMORY_USAGE%</p>
				</div>
			</div>			
		</div>
	</body>
	<script src="system_management.js"></script>
</html>